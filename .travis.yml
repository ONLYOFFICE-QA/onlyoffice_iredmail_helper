addons:
  apt:
    packages:
    - openvpn

language: ruby
rvm:
- 2.4.2

before_install:
  - openssl aes-256-cbc -K $encrypted_e8b590a3d986_key -iv $encrypted_e8b590a3d986_iv
    -in .travis/conf.ovpn.enc -out /conf.ovpn -d
  - sudo openvpn /conf.ovpn &>>openvpn-client.log &
  - gem install bundler -v 1.16.0

env:
  global:
  - secure: PlA2EsMXbaR3eLIeTSC15NjiiFLpY8mtmskgvPkluKJrLCJFTXqJNi9B0h5cmxEdN1anAJsyMBezTFsL01vdSweyndJXX+3e6oHRTf0gvj/TiwtwHGBnnikv/UGRhxCxBw9tYaTDDIhQw6Inw+efSOyjhxwbOZpLtoZInNdW+6IZwyL3GvM4podvQBUPjT2IshQZ7KyOcf5y6/+XxkcCOBMETBTpAKxAw57vY58sWt3tO3b8qDPW9MGrP+F99C3+/e8M9jlQMO/lBm59mp7tiEFVc2LWMgQ7L03tCmVwj/j4jklkEXNugbnNdNO8Nl6HTX+/Zf+YoKNKqS5WZl8sflNtEEcmv5GHjL5w9+fIPNCn6PUOBPizxaDURPSDDO8FLORXyPIqOxlxtkE9w4HOvarFZiBcLZaVYZVWHNWpIVnxM1SWU7os12lt/EyObLSoR8+s+XMUF7Abw4zY84hZmnHu3uYtIkwdIIXeNWYtDvEHnclSFZA3QIlNrT/tdCVhEwYDdmqs+GjrspVUVW/7i1I0Ro13r238fOpiAaEnK/CMGydwDloz1xV9lj9Q2dnhoM+9apJe1ka1uJOpOrsgKnTojKLV+GfgfyFeiDJJ52longRnHRqUu/PEbM8ZMSBW4w6lSNFW8w8xXFEZ1KWZRUnA7SCbd6wI6oG0c8nYfio=
  - secure: pYpBWOjgKsrgcYdGDPSZp2iSYtv0WSI2n28Rae6UK1AGh/CpGNyBDyXYqHhxzzEGsjWbzDtPXYZvej7yl4o4dIZxAopRiWifgMBCTexSYW7JFB+NYmN2nnaGnXgLqzyIfoErv8RjYnjW2PT/8IH3smEHzZZp6P+HPrazFYX0VYJJ4Y1siXsNmwOAWTOK7pxyFPhFW5SUhjvoxmKx0Heu4R9JTsQem+WFVwqmHS5NEuwWdQf1gr0FR0FPIrlFKant2qc/mGaCZ3tIBQ3CHFWA3STjFzfB906wr7kvGrn8IKIDGiL6m5YGatUhnywmTFAwG0WDRJde5XS1ufBYbqhHsVm71yaibhq0kIU7NZ6Zh8vfZvg7tR/+CSLB8s6DJ8f0XIWCEXk8GtGpek5zbQrL07pCqxSHJc0Syqu/vQlz54zvtqzXq8/Tvlm/VH88H7hWLP607a5xbukA9Qsw9N0ZZps67QSUMBVckD58F7vMMOMd9KptbkIfc0MPcAO2024Z1cHOCPPdLdLOFrkKYF0+SSHZM2307tVa6WEuDLqPXoDL9jHTqX2406JCnPj0NWKjwUfisTm+TWxG6tHWBAIphyI2tFF6JOK7uDmgHRpwivX30rYFfwvw/8ui4osVvcgkLL46z7mQ6gtIBFCSQk7xCm87eSwzbQcIKzrFE8enQ4Q=
  - secure: sSreXuPmLYUbLmvZYVPDX/gNUmqWvlOL0QdSZYl5laHQQ0hraRC9c3xJll1lSgWVsoa346XCUNLV6p7u8aYrPP1eQK6AjVCINkp87Wgsl7yUfsbX68PTlqnTQlj6v6y+PqvcOA1WjLPVzgTyBr2PyYxtfGQRKMc1eToF9gttxX9NQAzis4yC2rvpSzxIqHc5iWmK8hhsoWOhbIvLwIqKnBiLpTF4SnKytocdSyTOdrZ1JCOH0QTPzyiHjrDmxaMI0Zahq5GTE/M45J3oLJbcqnSAlrjt4tjrdBkmfNCu11pwWGt2rnD/RZVF/o6JPfHAHzCGHANOVbpkEXR6Cl29nHs9xysCb39QUWyUYnRYJ10+1Z1nMz+H0BNUhZxxJeUJf0IBe1H1KxXjshaHMt4xj/6Hci+K3vhp1sGpD6XtnAx4uhLbzaG+M7ruypRjHZxHHxXYvKd1WrUCJ5lGE+A4peAQn6VeE+BKmZle8qCw25K8NvvOYS+XgvQnNjDMS6KYYjMwCZaEGHa7wKUpqfQVc4EEQGojG9DCbPcNmskaBSDRsxK1Zfm9eElosju/UXxce0N9LXJf4fYYMn5mKkNDA8s34GNAH45Yr4wpXzs27MBO7Trg2AXtnC74bWC6LZYYdDt+h963lvECJOCKjMKIqO1MIr0XGj8bbv844E+AZos=
  - secure: urKM6+m4jXWh7ZxRHQhDSvI0jhQST1BjKvZpeFUSbFBu4nampJoWZ6mJCGr7fK3SXYeWFGjosnc/xzNqt/3LQEJlriX8Yqf51Z0O53Y4YoM52zlVHwFFEO9X5pKd1PhbFk3PKjBq7C2iCrs7jk6HkIaNxQpZU34hcZKsh3pnMAhbjAJHX4spRodYtTesYX0kyIZj1y6TTuYUkp+rhti3RdVLMDWmemXd0B61vhJ3Cu5ct2HfaR9IBX0DPmJ5dqMu2nn2ozL/6/G1WDd2Xbo7PicKDfmpcVwxbQkqb56PPlmx0/t3z/72Iwhhssm9uPdmIgGP8e7CFHTA6RfLX+RnMkHVZBQsvELUpl1qhMWyWDDe1Qjk2jUsIutk2FDbumGsYg7gehIzJSmelNL9pwDWJ97fOOPA6kkTY82K+0mWIm/MYgckpbL0rCQgh78bn/+Gh1T9D9ISJlZq4u04nSEujVZTE6wJISuSgvSz36nX4XHOwLhghUdrQ0T+gYyCSRLLSI+Z5Omcb2hsb1oXsk+97VAFKX8o7vRny6IW7L5rbcAz7ytXTnoaaqoslR00w9g2P7Ub5FzfYnP1TvpUfsIbPz7xyBwGaASnjUo/HUFrdoqjN4uW2aurn7cpqjTwT4gRj0Zcv9UNfawsu0fQZaXlMNb+COkQnEFNvGmac+irty8=
